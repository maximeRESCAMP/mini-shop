{% extends 'base.html.twig' %}

{% block title %}Détail du produit{% endblock %}

{% block body %}
    <div class="container py-5">

        <div class="bg-white shadow rounded p-4">
            <h1 class="text-center mb-4">Détail du produit</h1>

            <div class="row g-4 align-items-start">

                <div class="col-md-5 text-center">
                    <img src="{{ product.image }}"
                         alt="{{ product.name }}"
                         class="img-fluid rounded border shadow-sm"
                         style="max-height: 350px; object-fit: contain;">
                </div>

                <div class="col-md-7">
                    <h2 class="fw-bold">{{ product.name }}</h2>

                    <p class="text-muted mb-1">
                        <strong>Catégorie :</strong> {{ product.category.name }}
                    </p>

                    <p class="text-muted">
                        <strong>Prix :</strong>
                        <span class="fs-4 fw-bold">{{ product.price | round(2, 'common') }} €</span>
                    </p>

                    <hr>

                    <p class="mt-3">
                        <strong>Description :</strong><br>
                        {{ product.description }}
                    </p>
                    {% if(form) %}
                        {{ form_start(form) }}

                        <div class="my-custom-class-for-errors mb-3">
                            {{ form_errors(form) }}
                        </div>


                        <div class="">
                            <div class="d-flex justify-content-start align-items-center">
                                {{ form_label(form.quantity) }}
                                {{ form_widget(form.quantity) }}
                            </div>
                            {{ form_errors(form.quantity) }}
                        </div>

                        <div class="mt-3">
                            {{ form_row(form.save) }}
                        </div>
                        {{ form_end(form) }}
                    {% else %}
                        {% if (inCartItem) %}
                            <a href="{{ path('app_cart_item_remove',{id: product.id}) }}"
                               class="btn btn-danger mb-3">Supprimer du pannier</a>
                        {% endif %}
                        {% if (notInStock) %}
                            <button class="btn btn-secondary" disabled>Plus de stock</button>
                        {% endif %}
                    {% endif %}

                </div>
            </div>

        </div>

    </div>
{% endblock %}
